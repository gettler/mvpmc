#!/usr/bin/python
#
# html plugin
#

Import ('env')

dir = env['BUILD_DIR']
target = env['TARG']
libdir = env['INSTLIBDIR']
ldflags = env['LDFLAGS']
linkmode = env['LINKMODE']
bindir = env['INSTBINDIR']
webdir = env['INSTSHAREDIR']

if linkmode == 'dynamic':
	env.Append(CCFLAGS = ' -DPLUGIN_SUPPORT')
	
src = [ 'html.c' ]

static = env.StaticLibrary('mvpmc_html.plugin.a', src,
                           CPPPATH = [env['INCDIR'], env['INSTINCDIR']],
                           LINKFLAGS = ldflags)

if linkmode == 'dynamic':
    shared = env.SharedLibrary('mvpmc_html.plugin', src,
                               CPPPATH = [env['INCDIR'], env['INSTINCDIR']],
                               LINKFLAGS = ldflags)
    libs = env.Install(libdir, [ static, shared ])
else:
    libs = env.Install(libdir, [ static ])

css = env.Install(webdir, 'web.css')

inst = [ libs, css ]

Return('inst')
